{"version":3,"file":"js/about.4b825938.js","mappings":"gNACEA,EAAAA,EAAAA,IAEM,WAAAC,EAAA,KAAAA,EAAA,KADJC,EAAAA,EAAAA,IAAiB,UAAb,YAAQ,K,eCDhB,MAAMC,EAAS,CAAC,EAGVC,GAA2B,OAAgBD,EAAQ,CAAC,CAAC,SAASE,KAEpE,O,mKCLEL,EAAAA,EAAAA,IAGM,yBAFJE,EAAAA,EAAAA,IAAc,UAAV,SAAK,KACTI,EAAAA,EAAAA,IAAyCC,I,2CCAtC,SAASC,IACd,MAAMC,GAAmBC,EAAAA,EAAAA,IAAI,MAC7B,IAAIC,GAAa,EAEjB,MAAMC,EAAgBC,UACpB,GAAKC,EASL,OAJ+B,OAA3BL,EAAiBM,OAAmBJ,IACtCA,GAAa,QACPK,EAAgBF,IAEjBL,EAAiBM,MARtBN,EAAiBM,OAAQ,CAQE,EAGzBC,EAAkBH,UACtB,IAEE,IAAII,QAAmBH,EAAOI,gBAAgB,CAAEC,KAAMC,EAAAA,KAGnC,YAAfH,IACFA,QAAmBH,EAAOO,kBAAkB,CAAEF,KAAMC,EAAAA,KAChDE,UAAUC,SAAWD,UAAUC,QAAQC,eACnCF,UAAUC,QAAQC,WAG5Bf,EAAiBM,MAAwB,YAAfE,CAC5B,CAAE,MAAOQ,GACPC,QAAQC,MAAM,6BAA8BF,GAC5ChB,EAAiBM,OAAQ,CAC3B,CACAJ,GAAa,CAAK,EAGpB,MAAO,CAAEF,mBAAkBG,gBAC7B,C,0CCpCA,MAAMgB,GAAQC,EAAAA,EAAAA,OACR,cAAEjB,GAAkBJ,IAGpBsB,GAAcC,EAAAA,EAAAA,KAAS,IAAMH,EAAMI,QAAQF,cAG3CG,EAAapB,UACjB,IACE,MAAMqB,QAAuBC,OAAOC,sBAC9BC,QAA8BzB,EAAcsB,GAE9CG,GACFT,EAAMU,SAAS,sBAAuBJ,EAE1C,CAAE,MAAOT,GACPC,QAAQC,MAAM,mCAAoCF,EACpD,G,8MCnBF,MAAMrB,EAAc,EAEpB,QHKA,GACEmC,KAAM,YACNC,WAAY,CACVC,iBAAgBA,I,UIRpB,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASpC,KAEpE,O","sources":["webpack://fable-flow/./src/views/SettingsView.vue","webpack://fable-flow/./src/views/SettingsView.vue?80d1","webpack://fable-flow/./src/views/SetupView.vue","webpack://fable-flow/./src/composables/handlePermission.js","webpack://fable-flow/./src/components/LibraryPathSetup.vue","webpack://fable-flow/./src/components/LibraryPathSetup.vue?531e","webpack://fable-flow/./src/views/SetupView.vue?3478"],"sourcesContent":["<template>\n  <div>\n    <h1>Settings</h1>\n  </div>\n</template>\n","import { render } from \"./SettingsView.vue?vue&type=template&id=3a3411c4\"\nconst script = {}\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div>\n    <h1>Setup</h1>\n    <library-path-setup></library-path-setup>\n  </div>\n</template>\n\n<script>\nimport LibraryPathSetup from '@/components/LibraryPathSetup'\n\nexport default {\n  name: 'SetupView',\n  components: {\n    LibraryPathSetup\n  }\n}\n</script>\n","import { ref } from 'vue'\r\nimport { DIRECTORY_PERMISSION_MODE } from '@/constants'\r\n\r\nexport function useHandlePermission () {\r\n  const permissionStatus = ref(null)\r\n  let isChecking = false\r\n\r\n  const hasPermission = async (handle) => {\r\n    if (!handle) {\r\n      permissionStatus.value = false\r\n      return\r\n    }\r\n\r\n    if (permissionStatus.value === null && !isChecking) {\r\n      isChecking = true\r\n      await checkPermission(handle)\r\n    }\r\n    return permissionStatus.value\r\n  }\r\n\r\n  const checkPermission = async (handle) => {\r\n    try {\r\n      // Check current\r\n      let permission = await handle.queryPermission({ mode: DIRECTORY_PERMISSION_MODE })\r\n\r\n      // If not granted, ask for it\r\n      if (permission !== 'granted') {\r\n        permission = await handle.requestPermission({ mode: DIRECTORY_PERMISSION_MODE })\r\n        if (navigator.storage && navigator.storage.persist) {\r\n          await navigator.storage.persist()\r\n        }\r\n      }\r\n      permissionStatus.value = (permission === 'granted')\r\n    } catch (e) {\r\n      console.error('Issue on permission check:', e)\r\n      permissionStatus.value = false\r\n    }\r\n    isChecking = false\r\n  }\r\n\r\n  return { permissionStatus, hasPermission }\r\n}\r\n","<script setup>\r\nimport { computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useHandlePermission } from '@/composables/handlePermission'\r\n\r\nconst store = useStore()\r\nconst { hasPermission } = useHandlePermission()\r\n\r\n// computed\r\nconst libraryName = computed(() => store.getters.libraryName)\r\n\r\n// methods\r\nconst selectPath = async () => {\r\n  try {\r\n    const selectedHandle = await window.showDirectoryPicker() // display directory picker for user\r\n    const hasPermissionOnHandle = await hasPermission(selectedHandle)\r\n    // if granted, update store\r\n    if (hasPermissionOnHandle) {\r\n      store.dispatch('updateLibraryHandle', selectedHandle)\r\n    }\r\n  } catch (e) {\r\n    console.error('Error on library path selection:', e)\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <p>\r\n      Current directory is set to {{ libraryName }}\r\n    </p>\r\n    <p>\r\n      <button @click=\"selectPath\">Select a directory as library</button>\r\n    </p>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","import script from \"./LibraryPathSetup.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LibraryPathSetup.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { render } from \"./SetupView.vue?vue&type=template&id=0649cf84\"\nimport script from \"./SetupView.vue?vue&type=script&lang=js\"\nexport * from \"./SetupView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementBlock","_cache","_createElementVNode","script","__exports__","render","_createVNode","_component_library_path_setup","useHandlePermission","permissionStatus","ref","isChecking","hasPermission","async","handle","value","checkPermission","permission","queryPermission","mode","DIRECTORY_PERMISSION_MODE","requestPermission","navigator","storage","persist","e","console","error","store","useStore","libraryName","computed","getters","selectPath","selectedHandle","window","showDirectoryPicker","hasPermissionOnHandle","dispatch","name","components","LibraryPathSetup"],"sourceRoot":""}